(this["webpackJsonpuser-management-app"]=this["webpackJsonpuser-management-app"]||[]).push([[0],{215:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(26),s=n.n(c),i=(n(99),n(12)),o=n(29),u=n(4),l=n(28),j=(n(103),n(7)),b=n(6),d=n.n(b),p=n(14),f="SET_USERS",m="ADD_USER",O="LOGIN_USER",v="LOGOUT_USER",h="SET_PREVIEW_IMAGE",x=n(3),g="https://scontent-vie1-1.xx.fbcdn.net/v/t1.0-9/530790_116956241792417_1239022532_n.jpg?_nc_cat=110&ccb=1-3&_nc_sid=09cbfe&_nc_ohc=iW3xye82GuIAX-02m-z&_nc_ht=scontent-vie1-1.xx&oh=46dd6c1b6910a730025b8a6eea77e15f&oe=6073C295",y="https://reqres.in/api/users";function L(){return(L=Object(p.a)(d.a.mark((function e(t){var n,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(x.a)({},t)).avatar||(n.avatar=g),e.next=4,fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:if(a=e.sent,!(r.status>=400)){e.next=12;break}throw a;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){return L.apply(this,arguments)},I="https://reqres.in/api/users?per_page=100";function S(){return(S=Object(p.a)(d.a.mark((function e(){var t,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(I,{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:if(n=e.sent,!(t.status>=400)){e.next=10;break}throw n;case 10:return e.abrupt("return",n.data);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(){return S.apply(this,arguments)},_="https://reqres.in/api/login";function k(){return(k=Object(p.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,!(n.status>=400)){e.next=10;break}throw r.error;case 10:return e.abrupt("return",r.token);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){return k.apply(this,arguments)},E="OPEN_MODAL",M="CLOSE_MODAL";function R(){return{type:M}}var U=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0;a<n.length;a++)if(n[a].toLowerCase().includes(e.toLowerCase()))return!0};var q=function(e){var t=JSON.parse(localStorage.getItem("createdUsersList"));t||(t=[]),t.push(e);var n=JSON.stringify(t);localStorage.setItem("createdUsersList",n)};function T(e){var t=e.users,n=e.filter;return{type:f,payload:{users:t,filter:n}}}function A(){return function(e){localStorage.removeItem("userToken"),e({type:v})}}var P=n(1);var D=Object(i.b)((function(e){return{isLoggedIn:e.user.isLoggedIn}}),(function(e){return{handleLogout:function(){return e(A())}}}))((function(e){var t=e.isLoggedIn,n=e.handleLogout;return Object(P.jsxs)("nav",{children:[t&&Object(P.jsx)("button",{className:"logout-btn",onClick:function(){return n()},children:Object(P.jsx)(o.b,{to:"/",children:"Logout"})}),Object(P.jsx)("h1",{children:"User Management App"})]})})),F=n(20),J=n(15);var G=function(e){return Object(P.jsx)("p",{className:"error",children:e.children})};var B=function(e){var t=e.type,n=e.label,r=e.name;return Object(P.jsxs)("div",{className:"form-control",children:[Object(P.jsx)("label",{htmlFor:"email",children:n}),Object(P.jsx)("div",{className:"input-container",children:Object(P.jsx)(F.b,{type:t,name:r,id:r})}),Object(P.jsx)(F.a,{name:r,component:G})]})};var V=function(e){var t=e.onSubmit,n=J.a({email:J.b().email("Invalid e-mail format").required("Required"),password:J.b().required("Required")});return Object(P.jsx)(F.d,{initialValues:{email:"",password:""},onSubmit:t,validationSchema:n,children:Object(P.jsxs)(F.c,{children:[Object(P.jsx)(B,{type:"text",name:"email",label:"E-mail"}),Object(P.jsx)(B,{type:"password",name:"password",label:"Password"}),Object(P.jsx)("button",{className:"submit-btn",type:"submit",children:"Login"})]})})};var z=Object(i.b)((function(e){return{isLoggedIn:e.user.isLoggedIn}}),(function(e){return{handleLogin:function(t){return e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C(e);case 3:r=t.sent,localStorage.setItem("userToken",r),n({type:O}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),l.b.error("Error logging in: ".concat(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.isLoggedIn,n=e.handleLogin;return t?Object(P.jsx)(u.a,{to:"/main"}):Object(P.jsx)("div",{className:"screen-container",children:Object(P.jsx)("main",{children:Object(P.jsxs)("div",{className:"content-container",children:[Object(P.jsx)("h2",{children:"Login"}),Object(P.jsx)(V,{onSubmit:n})]})})})})),W=n(18),X=n(61),H=n.n(X),K=n(93),Q=n.n(K);n(214);var Y=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)((function(){new Q.a(t.current,{zoomable:!1,scalable:!1,aspectRatio:1})}),[]),Object(P.jsx)("div",{className:"img-container",children:Object(P.jsx)("img",{src:e.src,ref:t,width:"200px",alt:"Source"})})};var Z=function(e){var t=e.callback,n=e.textContent;return Object(P.jsx)("button",{className:"add-image-btn",onClick:function(e){e.preventDefault(),t()},children:n})};var $=Object(i.b)((function(e){return{previewImage:e.user.previewImage}}),(function(e){return{setPreviewImage:function(t){return e(function(e){return{type:h,payload:e}}(t))}}}))((function(e){var t=e.previewImage,n=e.setPreviewImage,a=Object(r.useState)(),c=Object(W.a)(a,2),s=c[0],i=c[1],o=Object(r.useRef)();return Object(r.useEffect)((function(){if(s){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(s)}else n(null)}),[s]),Object(P.jsxs)("div",{children:[t?Object(P.jsxs)("div",{children:[Object(P.jsx)(Y,{src:t}),Object(P.jsx)(Z,{callback:function(){return i(null)},textContent:"Remove Image"})]}):Object(P.jsx)(Z,{callback:function(){return o.current.click()},textContent:"Add Image"}),Object(P.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},ref:o,onChange:function(e){var t=e.target.files[0];t&&"image"===t.type.slice(0,5)?i(t):i(null)}})]})}));var ee=Object(i.b)((function(e){return{previewImage:e.user.previewImage}}),null)((function(e){var t=e.onSubmit,n=e.previewImage,r=J.a({email:J.b().email("Invalid e-mail format").required("Required"),first_name:J.b().required("Required"),last_name:J.b().required("Required"),avatar:J.b().url("Invalid URL")});return Object(P.jsx)(F.d,{initialValues:{email:"",first_name:"",last_name:"",avatar:""},onSubmit:t,validationSchema:r,children:Object(P.jsxs)(F.c,{children:[Object(P.jsx)(B,{type:"text",name:"first_name",label:"First name"}),Object(P.jsx)(B,{type:"text",name:"last_name",label:"Last name"}),Object(P.jsx)(B,{type:"text",name:"email",label:"E-mail"}),!n&&Object(P.jsx)(B,{type:"text",name:"avatar",label:"Avatar URL"}),Object(P.jsx)($,{}),Object(P.jsx)("button",{className:"submit-btn",type:"submit",children:"Create User"})]})})}));var te=function(e){var t=e.isModalOpen,n=e.closeModal,r=e.createUser;return H.a.setAppElement("#root"),Object(P.jsxs)(H.a,{className:"modal",overlayClassName:"overlay",isOpen:t,onRequestClose:n,children:[Object(P.jsx)("button",{className:"close-modal-btn",onClick:n,children:"X"}),Object(P.jsx)(ee,{onSubmit:function(e){r(e)}})]})};var ne=function(e){var t=e.user,n=t.first_name,r=t.last_name,a=t.avatar;return Object(P.jsxs)("div",{className:"card",children:[Object(P.jsx)("div",{className:"card-image",children:Object(P.jsx)("img",{src:a,alt:"user"})}),Object(P.jsxs)("div",{className:"card-details",children:[Object(P.jsx)("p",{children:n}),Object(P.jsx)("p",{children:r})]})]})};var re=function(e){var t=e.userList;return e.emptyState?Object(P.jsx)("div",{className:"user-list-empty-state",children:"No users"}):Object(P.jsx)("div",{className:"user-list",children:t.map((function(e){return Object(P.jsx)(ne,{user:e},e.id)}))})};var ae=Object(i.b)((function(e){return{isModalOpen:e.modal.isModalOpen,userList:e.user.userList,isLoggedIn:e.user.isLoggedIn}}),(function(e){return{openModal:function(){return e({type:E})},closeModal:function(){return e(R())},fetchUsers:function(t){return e(function(e){return function(){var t=Object(p.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,N();case 3:r=t.sent,(a=JSON.parse(localStorage.getItem("createdUsersList")))&&r.push.apply(r,Object(j.a)(a)),n(T({users:r,filter:e})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),l.b.error("Error fetching users: ".concat(t.t0.message));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},createUser:function(t){return e((n=t,function(){var e=Object(p.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(n);case 3:r=e.sent,q(r),t({type:m,payload:r}),l.b.success("Successfully created new user"),t(R()),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l.b.error("Error creating new user: ".concat(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()));var n}}}))((function(e){var t=e.isModalOpen,n=e.openModal,a=e.closeModal,c=e.userList,s=e.fetchUsers,i=e.createUser,o=e.isLoggedIn,l=Object(r.useState)(""),j=Object(W.a)(l,2),b=j[0],d=j[1];return Object(r.useEffect)((function(){s(b)}),[b]),o?Object(P.jsx)("div",{className:"screen-container",children:Object(P.jsxs)("main",{children:[Object(P.jsxs)("div",{className:"content-container",children:[Object(P.jsx)("div",{className:"form-control",children:Object(P.jsx)("input",{placeholder:"Search",onChange:function(e){return d(e.target.value)},type:"search",name:"search",id:"search",value:b})}),Object(P.jsx)("button",{className:"create-new-btn",onClick:n,children:"+ Add new user"}),Object(P.jsx)(te,{isModalOpen:t,closeModal:a,createUser:i})]}),Object(P.jsx)(re,{userList:c,emptyState:0===c.length})]})}):Object(P.jsx)(u.a,{to:"/"})})),ce=n(31),se=n(94),ie={isModalOpen:!1};var oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(x.a)(Object(x.a)({},e),{},{isModalOpen:!0});case M:return Object(x.a)(Object(x.a)({},e),{},{isModalOpen:!1});default:return Object(x.a)({},e)}},ue={userList:[],isLoggedIn:Boolean(localStorage.getItem("userToken")),previewImage:null};var le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var n=t.payload,r=n.users,a=n.filter;if(a.length>=2){var c=r.filter((function(e){var t=e.first_name,n=e.last_name,r="".concat(t," ").concat(n);return U(a,t,n,r)}));return Object(x.a)(Object(x.a)({},e),{},{userList:c})}return Object(x.a)(Object(x.a)({},e),{},{userList:r});case m:var s=t.payload;return Object(x.a)(Object(x.a)({},e),{},{userList:[].concat(Object(j.a)(e.userList),[s])});case O:return Object(x.a)(Object(x.a)({},e),{},{isLoggedIn:!0});case v:return Object(x.a)(Object(x.a)({},e),{},{isLoggedIn:!1});case h:var i=t.payload;return Object(x.a)(Object(x.a)({},e),{},{previewImage:i});default:return Object(x.a)({},e)}},je=Object(ce.d)(Object(ce.c)({modal:oe,user:le}),Object(ce.a)(se.a));var be=function(){return Object(P.jsx)(o.a,{children:Object(P.jsx)(u.d,{children:Object(P.jsxs)(i.a,{store:je,children:[Object(P.jsx)(D,{}),Object(P.jsx)(u.b,{exact:!0,path:"/",component:z}),Object(P.jsx)(u.b,{exact:!0,path:"/main",component:ae}),Object(P.jsx)(l.a,{position:"bottom-right",autoClose:3e3})]})})})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,216)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(be,{})}),document.getElementById("root")),de()},99:function(e,t,n){}},[[215,1,2]]]);
//# sourceMappingURL=main.e03d7c43.chunk.js.map